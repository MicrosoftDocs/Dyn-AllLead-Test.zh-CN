---
title: Design Details - Posting Engine Structure
description: Posting interface and some other functions in codeunit 12 use posting engine functions to prepare and insert general ledger entry and VAT entry records. The posting engine is also responsible for general ledger register creation.
documentationcenter: ''
author: SorenGP
ms.prod: dynamics-nav-2018
ms.topic: article
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: na
ms.search.keywords: ''
ms.date: 07/01/2017
ms.author: sgroespe
ms.openlocfilehash: c09af6f9ba74abbf8cb089cc69b809787d2467bd
ms.sourcegitcommit: 02827d275e1341d5c9ddb7b314b43b48a9ac96e2
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/04/2019
ms.locfileid: "6881"
---
# <a name="design-details-posting-engine-structure"></a><span data-ttu-id="594dc-104">Design Details: Posting Engine Structure</span><span class="sxs-lookup"><span data-stu-id="594dc-104">Design Details: Posting Engine Structure</span></span>
<span data-ttu-id="594dc-105">Posting interface and some other functions in codeunit 12 use posting engine functions to prepare and insert general ledger entry and VAT entry records.</span><span class="sxs-lookup"><span data-stu-id="594dc-105">Posting interface and some other functions in codeunit 12 use posting engine functions to prepare and insert general ledger entry and VAT entry records.</span></span> <span data-ttu-id="594dc-106">The posting engine is also responsible for general ledger register creation.</span><span class="sxs-lookup"><span data-stu-id="594dc-106">The posting engine is also responsible for general ledger register creation.</span></span>  
  
 <span data-ttu-id="594dc-107">The functions in the following table provide a standard framework for designing posting procedures (such as Code, CustPostApplyCustledgEntry, VendPostApplyVendLedgEntry, UnapplyCustLedgEntry, UnapplyVendLedgEntry, and Reverse) and exclusive access to table 17, G/L Entry.</span><span class="sxs-lookup"><span data-stu-id="594dc-107">The functions in the following table provide a standard framework for designing posting procedures (such as Code, CustPostApplyCustledgEntry, VendPostApplyVendLedgEntry, UnapplyCustLedgEntry, UnapplyVendLedgEntry, and Reverse) and exclusive access to table 17, G/L Entry.</span></span>  
  
|<span data-ttu-id="594dc-108">Routine</span><span class="sxs-lookup"><span data-stu-id="594dc-108">Routine</span></span>|<span data-ttu-id="594dc-109">Description</span><span class="sxs-lookup"><span data-stu-id="594dc-109">Description</span></span>|  
|-------------|---------------------------------------|  
|<span data-ttu-id="594dc-110">StartPosting</span><span class="sxs-lookup"><span data-stu-id="594dc-110">StartPosting</span></span>|<span data-ttu-id="594dc-111">Initializes posting buffer TempGLEntryBuf, locks G/L Entry and VAT Entry tables, and initializes Accounting Period, G/L Register, and Exchange Rate.</span><span class="sxs-lookup"><span data-stu-id="594dc-111">Initializes posting buffer TempGLEntryBuf, locks G/L Entry and VAT Entry tables, and initializes Accounting Period, G/L Register, and Exchange Rate.</span></span> <span data-ttu-id="594dc-112">Should be called only once, then NextEntryNo is 0.</span><span class="sxs-lookup"><span data-stu-id="594dc-112">Should be called only once, then NextEntryNo is 0.</span></span>|  
|<span data-ttu-id="594dc-113">ContinuePosting</span><span class="sxs-lookup"><span data-stu-id="594dc-113">ContinuePosting</span></span>|<span data-ttu-id="594dc-114">Checks and posts unrealized VAT for previous transaction increment NextTransactionNo and prepares post of next line.</span><span class="sxs-lookup"><span data-stu-id="594dc-114">Checks and posts unrealized VAT for previous transaction increment NextTransactionNo and prepares post of next line.</span></span>|  
|<span data-ttu-id="594dc-115">FinishPosting</span><span class="sxs-lookup"><span data-stu-id="594dc-115">FinishPosting</span></span>|<span data-ttu-id="594dc-116">Completes posting by inserting G/L entries from temporary buffer into database table.</span><span class="sxs-lookup"><span data-stu-id="594dc-116">Completes posting by inserting G/L entries from temporary buffer into database table.</span></span> <span data-ttu-id="594dc-117">Always used together with StartPosting.</span><span class="sxs-lookup"><span data-stu-id="594dc-117">Always used together with StartPosting.</span></span> <span data-ttu-id="594dc-118">Checks for inconsistencies.</span><span class="sxs-lookup"><span data-stu-id="594dc-118">Checks for inconsistencies.</span></span>|  
|<span data-ttu-id="594dc-119">InitGLEntry</span><span class="sxs-lookup"><span data-stu-id="594dc-119">InitGLEntry</span></span>|<span data-ttu-id="594dc-120">Used to initialize new G/L entry for Gen. Jnl Line.</span><span class="sxs-lookup"><span data-stu-id="594dc-120">Used to initialize new G/L entry for Gen. Jnl Line.</span></span> <span data-ttu-id="594dc-121">Returns GLEntry as parameter.</span><span class="sxs-lookup"><span data-stu-id="594dc-121">Returns GLEntry as parameter.</span></span>|  
|<span data-ttu-id="594dc-122">InitGLEntryVAT</span><span class="sxs-lookup"><span data-stu-id="594dc-122">InitGLEntryVAT</span></span>|<span data-ttu-id="594dc-123">Same as InitGLEntry, but also assigns Bal. Account No. and SummarizeVAT.</span><span class="sxs-lookup"><span data-stu-id="594dc-123">Same as InitGLEntry, but also assigns Bal. Account No. and SummarizeVAT.</span></span>|  
|<span data-ttu-id="594dc-124">InitGLEntryVATCopy</span><span class="sxs-lookup"><span data-stu-id="594dc-124">InitGLEntryVATCopy</span></span>|<span data-ttu-id="594dc-125">Similar to InitGLEntryVAT, but also copies posting groups data from VAT Entry before SummarizeVAT.</span><span class="sxs-lookup"><span data-stu-id="594dc-125">Similar to InitGLEntryVAT, but also copies posting groups data from VAT Entry before SummarizeVAT.</span></span>|  
|<span data-ttu-id="594dc-126">InsertGLEntry</span><span class="sxs-lookup"><span data-stu-id="594dc-126">InsertGLEntry</span></span>|<span data-ttu-id="594dc-127">The only function that inserts G/L entry into global TempGLEntryBuf table.</span><span class="sxs-lookup"><span data-stu-id="594dc-127">The only function that inserts G/L entry into global TempGLEntryBuf table.</span></span> <span data-ttu-id="594dc-128">Always use this function for insert.</span><span class="sxs-lookup"><span data-stu-id="594dc-128">Always use this function for insert.</span></span>|  
|<span data-ttu-id="594dc-129">CreateGLEntry</span><span class="sxs-lookup"><span data-stu-id="594dc-129">CreateGLEntry</span></span>|<span data-ttu-id="594dc-130">Performs an InitGLEntry, assigns Additional Currency Amount, and then performs InsertGLEntry.</span><span class="sxs-lookup"><span data-stu-id="594dc-130">Performs an InitGLEntry, assigns Additional Currency Amount, and then performs InsertGLEntry.</span></span> <span data-ttu-id="594dc-131">Replaces several lines of code with a single function call.</span><span class="sxs-lookup"><span data-stu-id="594dc-131">Replaces several lines of code with a single function call.</span></span>|  
|<span data-ttu-id="594dc-132">CreateGLEntryBalAcc</span><span class="sxs-lookup"><span data-stu-id="594dc-132">CreateGLEntryBalAcc</span></span>|<span data-ttu-id="594dc-133">Same as CreateGLEntry, but also assigns Bal. Account Type and Bal. Account No.</span><span class="sxs-lookup"><span data-stu-id="594dc-133">Same as CreateGLEntry, but also assigns Bal. Account Type and Bal. Account No.</span></span>|  
|<span data-ttu-id="594dc-134">CreateGLEntryVAT</span><span class="sxs-lookup"><span data-stu-id="594dc-134">CreateGLEntryVAT</span></span>|<span data-ttu-id="594dc-135">Same as CreateGLEntry, but with additional processing for posting groups and saving to temporary VAT buffer:</span><span class="sxs-lookup"><span data-stu-id="594dc-135">Same as CreateGLEntry, but with additional processing for posting groups and saving to temporary VAT buffer:</span></span><br /><br /> `GLEntry.CopyPostingGroupsFromDtldCVBuf(DtldCVLedgEntryBuf,GenJnlLine."Gen. Posting Type");`<br /><br /> `InsertVATEntriesFromTemp(DtldCVLedgEntryBuf,GLEntry);`|  
|<span data-ttu-id="594dc-136">CreateGLEntryVATCollectAdj</span><span class="sxs-lookup"><span data-stu-id="594dc-136">CreateGLEntryVATCollectAdj</span></span>|<span data-ttu-id="594dc-137">Same as CreateGLEntry, but with additional collection of adjustments and saving to temporary VAT buffer:</span><span class="sxs-lookup"><span data-stu-id="594dc-137">Same as CreateGLEntry, but with additional collection of adjustments and saving to temporary VAT buffer:</span></span><br /><br /> `CollectAdjustment(AdjAmount,GLEntry.Amount,GLEntry."Additional-Currency Amount",OriginalDateSet);`<br /><br /> `InsertVATEntriesFromTemp(DtldCVLedgEntryBuf,GLEntry);`|  
|<span data-ttu-id="594dc-138">CreateGLEntryFromVATEntry</span><span class="sxs-lookup"><span data-stu-id="594dc-138">CreateGLEntryFromVATEntry</span></span>|<span data-ttu-id="594dc-139">Same as CreateGLEntry, but also copies posting groups from VAT entry.</span><span class="sxs-lookup"><span data-stu-id="594dc-139">Same as CreateGLEntry, but also copies posting groups from VAT entry.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="594dc-140">See Also</span><span class="sxs-lookup"><span data-stu-id="594dc-140">See Also</span></span>  
 [<span data-ttu-id="594dc-141">Design Details: Posting Interface Structure</span><span class="sxs-lookup"><span data-stu-id="594dc-141">Design Details: Posting Interface Structure</span></span>](design-details-posting-interface-structure.md)